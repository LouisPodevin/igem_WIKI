<!DOCTYPE html>

<head>
    <title>Home</title>
    <link rel="stylesheet" href="./index.css" />
</head>
<script type="module" src="./scripts/wiki.js"></script>
<script
    src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js"
    defer
></script>

<body>
    <div class="navigation"></div>
    <div id="welcome" class="container">
        <h1>Bactails - IGEM IONIS</h1>
        <div class="welcomeContent">
            <div class="welcomeText">
                <div class="welcomeText1">Handle</div>
                <div class="welcomeText2">Antibiotics</div>
                <div class="welcomeText3">With care !</div>
            </div>
            <div class="welcomeLogo">
                <div id="bm"></div>
                <script type="module">
                    const initAnim = async () => {
                        const animLogoElm = document.getElementById("bm")

                        while (!window.bodymovin) {
                            await new Promise(res => setTimeout(res, 500))
                        }

                        const animation = bodymovin.loadAnimation({
                            container: animLogoElm,
                            renderer: "svg",
                            autoplay: true,
                            path: window.LINKS.logoAnimationHome.url,
                            loop: false,
                        })

                        let complete = false

                        animation.addEventListener("complete", () => {
                            complete = true
                        })

                        animLogoElm.addEventListener("mouseenter", () => {
                            if (!complete) {
                                return
                            }
                            complete = false
                            animation.goToAndPlay(0)
                        })
                    }

                    initAnim()
                </script>
            </div>
        </div>
    </div>
    <div id="seeMore">
        <button class="container seeMoreContainer">
            <div class="seeMoreLogoContainer">
                <i class="seeMoreLogo" data-feather="chevron-down"></i>
            </div>
            <div class="seeMoreText">Click here to see more</div>
        </button>
    </div>
    <div id="facts">
        <div class="container">
            <div class="row">
                <div class="col-xl-6">
                    <div class="fact1">
                        <div class="fact1Header">
                            <div class="fact1LogoContainer" x-data="{}">
                                <img
                                    :src="window.LINKS.pillsHome.url"
                                    alt="Pill Antibiotics"
                                    class="fact1Logo"
                                />
                            </div>
                            <div class="fact1Title">
                                They are considered as one of the biggest therapeutic
                                advances of the 20th century !
                            </div>
                        </div>
                        <div class="fact1Text">
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                            Aenean laoreet tellus sit amet enim condimentum, nec tempus
                            nisl accumsan. Suspendisse nec tristique sapien, non ultrices
                            mauris. Nulla facilisi. Phasellus facilisis in lacus ut
                            pellentesque.
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-6">
                    <div class="factCard fact2 triggerMiddle">
                        <div class="factHeader">
                            <div class="feactHeaderNumber">10</div>
                            <div class="factHeaderSub">Million</div>
                            <div class="factIcon">
                                <i data-feather="zap" class="factIconFeather iconZap"></i>
                            </div>
                        </div>
                        <div class="factText">
                            <b>10 million death</b> could occur annually by <b>2050</b> if
                            effective intervention methods against antimicrobial
                            resistance are not made
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-6">
                    <div class="factCard fact3 triggerMiddle">
                        <div class="factHeader">
                            <div class="feactHeaderNumber">25</div>
                            <div class="factHeaderSub">Years</div>
                            <div class="factIcon">
                                <i
                                    data-feather="rotate-ccw"
                                    class="factIconFeather iconRotate"
                                ></i>
                            </div>
                        </div>
                        <div class="factText">
                            <b>No new family of antibiotics</b> has been commercialised in
                            the past <b>25 years</b>.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="information">
        <div class="container">
            <div class="row">
                <div class="col-xl-6 align-middle">
                    <div class="informationCard triggerMiddle">
                        <div class="informationHeader">
                            <div class="infomationIconContainer">
                                <i class="informationIcon" data-feather="info"></i>
                            </div>
                        </div>
                        <div class="informationText">
                            In hospital, for example, this resistance leads to an increase
                            in <b>nosocomial infections</b> due to particularly resistant
                            germs such as Escherichia coli.According to Health Minister,
                            nosocomial infections cause <b>4 000 deaths per year</b> in
                            France.
                        </div>
                    </div>
                </div>
                <div class="col-xl-6 align-middle">
                    <div class="illustrationInformation">
                        <div id="lm"></div>
                        <script type="module" defer>
                            const initAnim = async () => {
                                const animLogoElm = document.getElementById("lm")

                                while (!window.bodymovin) {
                                    await new Promise(res => setTimeout(res, 500))
                                }

                                const animation = bodymovin.loadAnimation({
                                    container: animLogoElm,
                                    renderer: "svg",
                                    autoplay: false,
                                    path: window.LINKS.graphiqueAnimateHome.url,
                                    loop: false,
                                })

                                let animStarted = false

                                const startAnim = () => {
                                    if (animStarted) {
                                        return
                                    }

                                    const elmPos = animLogoElm.getBoundingClientRect().top
                                    const posFromMiddle = elmPos - window.innerHeight / 2

                                    if (posFromMiddle < 0) {
                                        animStarted = true
                                        animation.goToAndPlay(0)
                                    }
                                }

                                while (!window.rxjs) {
                                    await new Promise(res => setTimeout(res, 300))
                                }

                                const { Subject, interval } = rxjs
                                const { throttle } = rxjs.operators

                                window.scrollSource
                                    .pipe(
                                        throttle(() => interval(300), {
                                            leading: true,
                                            trailing: true,
                                        }),
                                    )
                                    .subscribe(startAnim)

                                window.scrollSource.next()
                            }

                            initAnim()
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="projectDescription">
        <div class="container">
            <div class="titleProjectDescription triggerMiddle">
                So we created Bactail !
            </div>
            <div class="illustrationProjectDescriptionFake triggerMiddle"></div>
        </div>
    </div>
    <div id="wikiLinks">
        <div class="container">
            <div class="wikiLinkContainer" x-data="{}">
                <div class="wikiLinkCard triggerMiddle">
                    <img :src="window.LINKS.projectHome.url" />
                    <div class="wikiLinkCardText projectCard">The Project</div>
                </div>
                <div class="wikiLinkCard triggerMiddle">
                    <img :src="window.LINKS.humanHome.url" />
                    <div class="wikiLinkCardText humainCard">Humans Pratices</div>
                </div>
                <div class="wikiLinkCard triggerMiddle">
                    <img :src="window.LINKS.softwareHome.url" />
                    <div class="wikiLinkCardText softwareCard">The Software</div>
                </div>
            </div>
        </div>
    </div>
    <footer></footer>
</body>
<script>
    const init = async () => {
        while (!window.$) {
            await new Promise(res => setTimeout(res, 200))
        }

        $(() => {
            const buttonSeeMore = document.querySelector(".seeMoreContainer")
            const factDiv = document.getElementById("facts")
            buttonSeeMore.addEventListener("click", e => {
                e.preventDefault()
                $("html, body").animate({
                    scrollTop:
                        factDiv.getBoundingClientRect().top + window.pageYOffset - 30,
                })
            })
        })
    }

    init()
</script>
